<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="meals.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <nav>
        <section>
            <span><i class="fa-solid fa-utensils"></i></span>
            <span>MEAL FINDER</span>
        </section>
        <li id='click' onclick="sel()"><i class="fa-solid fa-bars"></i></li>
        <section id="select">
            <select id="mySelect">
            </select>
            <li id="mark" onclick="closee()"><i class="fa-solid fa-circle-xmark"></i></li>
        </section>
    </nav>
    <section class="div">
        <div class="div1">
            <input type="search" placeholder="search recipes here">
            <li><i class="fa-solid fa-magnifying-glass"></i></li>
        </div>
        <span class="id">What are your favourite cuisines?</span>
        <span style="padding-left: 31pc;"><small>PERSONALIZE YOUR EXPERIENCE</small></span>
    </section>
    <h3 id="head3">CATEGORIES</h3>
    <h2 id="head4">MEALS</h2>

    <div>
        <div id="container"></div>
    </div>
    <div class="data"></div>
    
    <script>
        // Hamburger functionality
        const select = document.getElementById('mySelect');
        const click = document.getElementById('click');
        function sel() {
            click.style.display = 'none';
            select.style.display = 'block';
            let array = ['Beef', 'Chicken', 'Dessert', 'Lamb', 'Miscellaneous', 'Pasta', 'Pork', 'Seafood', 'Side', 'Starter', 'Vegan', 'Vegetarian', 'Breakfast', 'Goat'];
            console.log(array);
            array.forEach(element => {
                const sel = document.getElementById('mySelect');
                const opt = document.createElement('option');
                opt.textContent = element;
                opt.value = element;
                sel.appendChild(opt);
            });
            


        };

        // close button functionality
        function closee() {
            const mark = document.getElementById('mark');
            click.style.display = 'block';
            select.style.display = 'none';
        };
        // Display the categories by using API fetch method  
        let fun = async () => {
            const container = document.getElementById('container');
            const dataContainer = document.querySelector('.data');
            const baseUrl = 'https://www.themealdb.com/api/json/v1/1/categories.php';
            const response = await fetch(baseUrl);
            const data = await response.json();
            let categoriesHtml = '';

            data.categories.forEach(category => {
                categoriesHtml += `
                <div class='container'>
                <h4 data-clickid="${category.strCategory}" id="head5">${category.strCategory}</h4>
                <img class="image hidden" alt="${category.strCategory}" data-clickid="${category.strCategory}" src="${category.strCategoryThumb}">
                </div>
                `;
            });

            container.innerHTML = categoriesHtml;

            const image = document.querySelectorAll('.image');
            image.forEach(img => {
                img.addEventListener('click', async function (e) {  // Use 'this' instead of event.target
                    const category = e.target.getAttribute('data-clickid');
                    const response = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`);
                    const mealsData = await response.json();
                    let mealsHtml = '';
                    mealsData.meals.forEach(meal => {
                        mealsHtml +=
                            `<div class='container1'>
                                <img src="${meal.strMealThumb}" alt="${meal.strMeal}" width=90% height=200px>
                                <p id="para">${meal.strMeal}</p>
                        </div>
                        `;
                    });

                    dataContainer.innerHTML = mealsHtml;
                    container.style.display='none';
                    document.getElementById('head3').style.display='none';
                    document.getElementById('head4').style.display='block';

                });
            });
        };


        fun();



    </script>
</body>

</html>